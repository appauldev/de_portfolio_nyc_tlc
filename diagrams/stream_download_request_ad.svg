<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="3113px" height="2114px" viewBox="-0.5 -0.5 3113 2114" style="background-color: rgb(255, 255, 255);"><defs><style>@keyframes ge-flow-animation-UKE0T_aPVpJtIpl-yDTB {&#xa;  to {&#xa;    stroke-dashoffset: 0;&#xa;  }&#xa;}</style><style type="text/css">@import url(https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500);&#xa;@import url(https://fonts.googleapis.com/css2?family=Architects+Daughter:wght@400;500);&#xa;</style></defs><rect fill="#ffffff" width="100%" height="100%" x="0" y="0"/><g><g><path d="M 12 218 L 1306 218 L 1340 252 L 1340 2066 L 12 2066 L 12 218 Z" fill="#fff2cc" stroke="#d6b656" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 1306 218 L 1306 252 L 1340 252" fill="none" stroke="#d6b656" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 662px; height: 1px; padding-top: 133px; margin-left: 7px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><b><font style="font-size: 16px;">Notes</font></b></div></div></div></foreignObject><text x="338" y="144" fill="rgb(0, 0, 0)" font-family="IBM Plex Sans" font-size="11px" text-anchor="middle">Notes</text></switch></g></g><g><path d="M 64 92 L 104 92 L 92 92 L 115.53 92" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 127.53 92 L 111.53 97.33 L 115.53 92 L 111.53 86.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><ellipse cx="34" cy="92" rx="30" ry="30" fill="#394a63" stroke="#394a63" stroke-width="2" pointer-events="all"/></g><g><path d="M 412 92 L 452 92 L 420 92 L 443.53 92" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 455.53 92 L 439.53 97.33 L 443.53 92 L 439.53 86.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="132" y="24" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 46px; margin-left: 67px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Get monthly partition key</div></div></div></foreignObject><text x="136" y="50" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Get monthly partition k...</text></switch></g></g><g><path d="M 740 92 L 780 92 L 748 92 L 771.53 92" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 783.53 92 L 767.53 97.33 L 771.53 92 L 767.53 86.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="460" y="24" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 46px; margin-left: 231px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Create directory and file name for saving the file</div></div></div></foreignObject><text x="300" y="50" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Create directory and fi...</text></switch></g></g><g><path d="M 1068 92 L 1108 92 L 1072 92 L 1095.53 92" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1107.53 92 L 1091.53 97.33 L 1095.53 92 L 1091.53 86.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="788" y="24" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 46px; margin-left: 395px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Construct API request</div></div></div></foreignObject><text x="464" y="50" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Construct API request</text></switch></g></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 16px; margin-left: 530px;"><div data-drawio-colors="color: black; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Arial, Helvetica; color: black; line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="padding:2px;border:1px solid gray;background:yellow;border-radius:2px;">1</div></div></div></div></foreignObject><text x="530" y="16" fill="black" font-family="Arial,Helvetica" font-size="12px">1</text></switch></g></g><g><path d="M 1392 92 L 1412 92 Q 1432 92 1432 112 L 1432 495 Q 1432 515 1443.76 515 L 1455.53 515" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1467.53 515 L 1451.53 520.33 L 1455.53 515 L 1451.53 509.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="1112" y="24" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 46px; margin-left: 557px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Start stream download loop</div></div></div></foreignObject><text x="626" y="50" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Start stream download l...</text></switch></g></g><g><path d="M 2066 150 L 2479.53 150" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2491.53 150 L 2475.53 155.33 L 2479.53 150 L 2475.53 144.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 61px; margin-left: 1135px;"><div data-drawio-colors="color: #394A63; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">[loop flag = False]</div></div></div></foreignObject><text x="1135" y="65" fill="#394A63" font-family="Helvetica" font-size="11px" text-anchor="middle">[loop flag = False]</text></switch></g></g><g><path d="M 2033 183 L 2033 223 L 2032.47 241.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2032.13 253.53 L 2027.25 237.38 L 2032.47 241.53 L 2037.92 237.69 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 101px; margin-left: 965px;"><div data-drawio-colors="color: #394A63; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;"><span style="">[loop flag = True]</span></div></div></div></foreignObject><text x="965" y="104" fill="#394A63" font-family="Helvetica" font-size="11px" text-anchor="middle">[loop flag = True]</text></switch></g></g><g><path d="M 2016.5 133.5 L 2025.93 124.07 Q 2033 117 2040.07 124.07 L 2058.93 142.93 Q 2066 150 2058.93 157.07 L 2040.07 175.93 Q 2033 183 2025.93 175.93 L 2007.07 157.07 Q 2000 150 2007.07 142.93 Z" fill="#ffe6cc" stroke="#d79b00" stroke-width="6" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 2636 218 L 2636 317.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2636 329.53 L 2630.67 313.53 L 2636 317.53 L 2641.33 313.53 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="2496" y="82" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 75px; margin-left: 1249px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">End request loop and return download metadata</div></div></div></foreignObject><text x="1318" y="79" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">End request loop and re...</text></switch></g></g><g><path d="M 2032 602 L 2032 642 L 2032.53 660.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2032.87 672.53 L 2027.08 656.69 L 2032.53 660.53 L 2037.75 656.38 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="1892" y="466" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 267px; margin-left: 947px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Read response</div></div></div></foreignObject><text x="1016" y="271" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Read response</text></switch></g></g><g><path d="M 2066 710 L 2479.53 710" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2491.53 710 L 2475.53 715.33 L 2479.53 710 L 2475.53 704.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 336px; margin-left: 1125px;"><div data-drawio-colors="color: #394A63; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">[response is empty ("[]")]</div></div></div></foreignObject><text x="1125" y="347" fill="#394A63" font-family="Helvetica" font-size="11px" text-anchor="middle">[response is empty ("[]")]</text></switch></g></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 333px; margin-left: 1120px;"><div data-drawio-colors="color: black; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Arial, Helvetica; color: black; line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="padding:2px;border:1px solid gray;background:yellow;border-radius:2px;">2</div></div></div></div></foreignObject><text x="1120" y="333" fill="black" font-family="Arial,Helvetica" font-size="12px">2</text></switch></g></g><g><path d="M 2033 743 L 2033 763 Q 2033 783 2033 780.5 L 2033 779.25 Q 2033 778 2033 789.76 L 2033 801.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2033 813.53 L 2027.67 797.53 L 2033 801.53 L 2038.33 797.53 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 385px; margin-left: 961px;"><div data-drawio-colors="color: #394A63; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">[response is a<div>non-empty JSON]</div></div></div></div></foreignObject><text x="961" y="388" fill="#394A63" font-family="Helvetica" font-size="11px" text-anchor="middle">[response is a...</text></switch></g></g><g><path d="M 2016.5 693.5 L 2025.93 684.07 Q 2033 677 2040.07 684.07 L 2058.93 702.93 Q 2066 710 2058.93 717.07 L 2040.07 735.93 Q 2033 743 2025.93 735.93 L 2007.07 717.07 Q 2000 710 2007.07 702.93 Z" fill="#ffe6cc" stroke="#d79b00" stroke-width="6" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 2776 710 L 3068 710 Q 3088 710 3088 690 L 3088 40 Q 3088 20 3068 20 L 1525 20 Q 1505 20 1505 40 L 1505 465.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1505 477.53 L 1499.67 461.53 L 1505 465.53 L 1510.33 461.53 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="2496" y="642" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 355px; margin-left: 1249px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Set loop flag to False to end stream download loop</div></div></div></foreignObject><text x="1318" y="359" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Set loop flag to False...</text></switch></g></g><g><path d="M 2032 1446 L 2032 1486 L 2032.39 1496.54" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2032.83 1508.53 L 2026.91 1492.74 L 2032.39 1496.54 L 2037.57 1492.34 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="1892" y="1310" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 689px; margin-left: 947px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Clean the received<div>JSON line and add it to the line accumulator</div></div></div></div></foreignObject><text x="1016" y="693" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Clean the received...</text></switch></g></g><g><path d="M 2033 1579 L 2033 1632.5 L 2032.31 1669.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2032.08 1681.53 L 2027.05 1665.43 L 2032.31 1669.53 L 2037.71 1665.63 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 812px; margin-left: 956px;"><div data-drawio-colors="color: #394A63; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">[accumulated lines<div>reached the line limit]</div></div></div></div></foreignObject><text x="956" y="815" fill="#394A63" font-family="Helvetica" font-size="11px" text-anchor="middle">[accumulated lines...</text></switch></g></g><g><path d="M 2000 1546 L 2000 1544 Q 2000 1542 1980 1542 L 1684 1542 Q 1664 1542 1664 1522 L 1664 1080 Q 1664 1060 1684 1060 L 1983.53 1060" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 1995.53 1060 L 1979.53 1065.33 L 1983.53 1060 L 1979.53 1054.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 748px; margin-left: 920px;"><div data-drawio-colors="color: #394A63; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">[accumulated lines &lt; line limit]</div></div></div></foreignObject><text x="920" y="759" fill="#394A63" font-family="Helvetica" font-size="11px" text-anchor="middle">[accumulated lines &lt; line limit]</text></switch></g></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 745px; margin-left: 916px;"><div data-drawio-colors="color: black; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Arial, Helvetica; color: black; line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="padding:2px;border:1px solid gray;background:yellow;border-radius:2px;">5</div></div></div></div></foreignObject><text x="916" y="745" fill="black" font-family="Arial,Helvetica" font-size="12px">5</text></switch></g></g><g><path d="M 2016.5 1529.5 L 2025.93 1520.07 Q 2033 1513 2040.07 1520.07 L 2058.93 1538.93 Q 2066 1546 2058.93 1553.07 L 2040.07 1571.93 Q 2033 1579 2025.93 1571.93 L 2007.07 1553.07 Q 2000 1546 2007.07 1538.93 Z" fill="#ffe6cc" stroke="#d79b00" stroke-width="6" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 2032 1822 L 2032 1885.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2032 1897.53 L 2026.67 1881.53 L 2032 1885.53 L 2037.33 1881.53 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="1892" y="1686" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 877px; margin-left: 947px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Save/append the accumulated lines to the CSV file</div></div></div></foreignObject><text x="1016" y="881" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Save/append the accumul...</text></switch></g></g><g><path d="M 1892 1970 L 1604 1970 Q 1584 1970 1584 1950 L 1584 1079 Q 1584 1059 1604 1059 L 1983.53 1059" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 1995.53 1059 L 1979.53 1064.33 L 1983.53 1059 L 1979.53 1053.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="1892" y="1902" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 985px; margin-left: 947px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Reset/clear the line accumulator for the next set of lines</div></div></div></foreignObject><text x="1016" y="989" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Reset/clear the line ac...</text></switch></g></g><g><path d="M 2852 1274 L 2852 1337.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2852 1349.53 L 2846.67 1333.53 L 2852 1337.53 L 2857.33 1333.53 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="2712" y="1138" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 603px; margin-left: 1357px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Save/append the accumulated lines to the CSV file</div></div></div></foreignObject><text x="1426" y="607" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Save/append the accumul...</text></switch></g></g><g><path d="M 2852 1490 L 2852 1561.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2852 1573.53 L 2846.67 1557.53 L 2852 1561.53 L 2857.33 1557.53 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="2712" y="1354" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 711px; margin-left: 1357px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Save/append the accumulated lines to the CSV file</div></div></div></foreignObject><text x="1426" y="715" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Save/append the accumul...</text></switch></g></g><g><path d="M 2992 1646 L 3068 1646 Q 3088 1646 3088 1626 L 3088 40 Q 3088 20 3068 20 L 1524 20 Q 1504 20 1504 40 L 1504 494 Q 1504 514 1504.24 506.23 L 1504.49 498.46" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1504.86 486.47 L 1509.69 502.63 L 1504.49 498.46 L 1499.03 502.3 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="2712" y="1578" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 823px; margin-left: 1357px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Set the loop flag to False</div></div></div></foreignObject><text x="1426" y="827" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Set the loop flag to Fa...</text></switch></g></g><g><path d="M 1538 515 L 1636 515 Q 1656 515 1656 495 L 1656 170 Q 1656 150 1676 150 L 1983.53 150" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 1995.53 150 L 1979.53 155.33 L 1983.53 150 L 1979.53 144.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 1488.5 498.5 L 1497.93 489.07 Q 1505 482 1512.07 489.07 L 1530.93 507.93 Q 1538 515 1530.93 522.07 L 1512.07 540.93 Q 1505 548 1497.93 540.93 L 1479.07 522.07 Q 1472 515 1479.07 507.93 Z" fill="#dae8fc" stroke="#556f94" stroke-width="6" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 2032 394 L 2032 414 Q 2032 434 2032 430 L 2032 428 Q 2032 426 2032 437.76 L 2032 449.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2032 461.53 L 2026.67 445.53 L 2032 449.53 L 2037.33 445.53 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="1892" y="258" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 163px; margin-left: 947px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Send API request</div></div></div></foreignObject><text x="1016" y="167" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Send API request</text></switch></g></g><g><path d="M 2033 1240 L 2033 1260 Q 2033 1280 2032.77 1286.77 L 2032.55 1293.54" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2032.15 1305.53 L 2027.35 1289.36 L 2032.55 1293.54 L 2038.01 1289.72 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 633px; margin-left: 940px;"><div data-drawio-colors="color: #394A63; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">[response is still streaming<div>JSON lines]</div></div></div></div></foreignObject><text x="940" y="637" fill="#394A63" font-family="Helvetica" font-size="11px" text-anchor="middle">[response is still streaming...</text></switch></g></g><g><path d="M 2066 1207 L 2407.53 1207" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2419.53 1207 L 2403.53 1212.33 L 2407.53 1207 L 2403.53 1201.67 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 569px; margin-left: 1111px;"><div data-drawio-colors="color: #394A63; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">[end of JSON<div>response reached]</div></div></div></div></foreignObject><text x="1111" y="580" fill="#394A63" font-family="Helvetica" font-size="11px" text-anchor="middle">[end of JSON...</text></switch></g></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 565px; margin-left: 1107px;"><div data-drawio-colors="color: black; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Arial, Helvetica; color: black; line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="padding:2px;border:1px solid gray;background:yellow;border-radius:2px;">4</div></div></div></div></foreignObject><text x="1107" y="565" fill="black" font-family="Arial,Helvetica" font-size="12px">4</text></switch></g></g><g><path d="M 2016.5 1190.5 L 2025.93 1181.07 Q 2033 1174 2040.07 1181.07 L 2058.93 1199.93 Q 2066 1207 2058.93 1214.07 L 2040.07 1232.93 Q 2033 1240 2025.93 1232.93 L 2007.07 1214.07 Q 2000 1207 2007.07 1199.93 Z" fill="#ffe6cc" stroke="#d79b00" stroke-width="6" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 2033 954 L 2033 974 Q 2033 994 2033 990 L 2033 988 Q 2033 986 2033 997.76 L 2033 1009.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2033 1021.53 L 2027.67 1005.53 L 2033 1009.53 L 2038.33 1005.53 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><rect x="1786" y="818" width="494" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 245px; height: 1px; padding-top: 443px; margin-left: 894px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Initialize the line accumulator and line limit<div>and stream the JSON response by line</div></div></div></div></foreignObject><text x="1017" y="447" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">Initialize the line accumulator and line...</text></switch></g></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 413px; margin-left: 1136px;"><div data-drawio-colors="color: black; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Arial, Helvetica; color: black; line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="padding:2px;border:1px solid gray;background:yellow;border-radius:2px;">3</div></div></div></div></foreignObject><text x="1136" y="413" fill="black" font-family="Arial,Helvetica" font-size="12px">3</text></switch></g></g><g><path d="M 2033 1092 L 2033 1157.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2033 1169.53 L 2027.67 1153.53 L 2033 1157.53 L 2038.33 1153.53 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 2016.5 1042.5 L 2025.93 1033.07 Q 2033 1026 2040.07 1033.07 L 2058.93 1051.93 Q 2066 1059 2058.93 1066.07 L 2040.07 1084.93 Q 2033 1092 2025.93 1084.93 L 2007.07 1066.07 Q 2000 1059 2007.07 1051.93 Z" fill="#dae8fc" stroke="#556f94" stroke-width="6" stroke-miterlimit="10" pointer-events="all"/></g><g><ellipse cx="2636" cy="364" rx="22" ry="22" fill="#394a63" stroke="#394a63" stroke-width="2" pointer-events="all"/><ellipse cx="2636" cy="364" rx="30" ry="30" fill="none" stroke="#394a63" stroke-width="2" pointer-events="all"/></g><g><path d="M 2457 1604 L 2457 2070 Q 2457 2090 2437 2090 L 1524 2090 Q 1504 2090 1504 2070 L 1504 814 Q 1504 794 1504.33 774 L 1505.67 694 Q 1506 674 1505.84 654 L 1505.13 564.47" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 1505.04 552.47 L 1510.5 568.43 L 1505.13 564.47 L 1499.83 568.51 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><path d="M 2490 1207 L 2581 1207 Q 2601 1207 2621 1206.82 L 2695.53 1206.15" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2707.53 1206.04 L 2691.58 1211.52 L 2695.53 1206.15 L 2691.48 1200.85 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 587px; margin-left: 1301px;"><div data-drawio-colors="color: #394A63; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">[line accumulator<div>is not empty]</div></div></div></div></foreignObject><text x="1301" y="590" fill="#394A63" font-family="Helvetica" font-size="11px" text-anchor="middle">[line accumulator...</text></switch></g></g><g><path d="M 2457 1240 L 2457 1451.53" fill="none" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="stroke" stroke-dasharray="16" style="animation: 500ms linear 0s infinite normal none running ge-flow-animation-UKE0T_aPVpJtIpl-yDTB; stroke-dashoffset: 32;"/><path d="M 2457 1463.53 L 2451.67 1447.53 L 2457 1451.53 L 2462.33 1447.53 Z" fill="#556f94" stroke="#556f94" stroke-width="4" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 657px; margin-left: 1179px;"><div data-drawio-colors="color: #394A63; background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">[line accumulator<div>is empty]</div></div></div></div></foreignObject><text x="1179" y="668" fill="#394A63" font-family="Helvetica" font-size="11px" text-anchor="middle">[line accumulator...</text></switch></g></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 654px; margin-left: 1174px;"><div data-drawio-colors="color: black; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Arial, Helvetica; color: black; line-height: 1.2; pointer-events: all; white-space: nowrap;"><div style="padding:2px;border:1px solid gray;background:yellow;border-radius:2px;">6</div></div></div></div></foreignObject><text x="1174" y="654" fill="black" font-family="Arial,Helvetica" font-size="12px">6</text></switch></g></g><g><path d="M 2440.5 1190.5 L 2449.93 1181.07 Q 2457 1174 2464.07 1181.07 L 2482.93 1199.93 Q 2490 1207 2482.93 1214.07 L 2464.07 1232.93 Q 2457 1240 2449.93 1232.93 L 2431.07 1214.07 Q 2424 1207 2431.07 1199.93 Z" fill="#ffe6cc" stroke="#d79b00" stroke-width="6" stroke-miterlimit="10" pointer-events="all"/></g><g/><g><rect x="96.22" y="324" width="1175.78" height="216" rx="19.44" ry="19.44" fill="#f5f5f5" stroke="#666666" stroke-width="2" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 562px; height: 1px; padding-top: 216px; margin-left: 66px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">We limit the response of each request to only return 500k records at most (the <b>response limit</b>) to avoid large payloads that could negatively affect our connection to the API server. Since the total records from our request will exceed this limit, we create a request loop that will continuously send our request to the server until all the records for our request has been exhausted.<div><br /></div><div>To retrieve the next set of records, we also include an '<b>offset</b>' parameter that is incremented by the response limit each time we send a new request to the server<br /></div></div></div></div></foreignObject><text x="66" y="219" fill="#333333" font-family="IBM Plex Sans" font-size="11px">We limit the response of each request to only return 500k records at most (the response limit) to avoi...</text></switch></g></g><g><rect x="80" y="401.63" width="40.54" height="60.75" rx="6.08" ry="6.08" fill="#ffff00" stroke="#808080" stroke-width="4" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 18px; height: 1px; padding-top: 216px; margin-left: 41px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">1</div></div></div></foreignObject><text x="50" y="220" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">1</text></switch></g></g><g/><g><rect x="96.22" y="559.38" width="1175.78" height="360" rx="32.4" ry="32.4" fill="#f5f5f5" stroke="#666666" stroke-width="2" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 562px; height: 1px; padding-top: 370px; margin-left: 66px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>When the response received is an empty JSON, in general, this could mean a couple of things:</div><div><ol style="padding-left: 30px; margin-top: 5px; margin-bottom: 5px;"><li>We made a logical error in our request parameters. The query is syntactically correct but the logic is flawed</li><li>No logical error but there are no records that correspond to our request query</li><li>No logical error and the next offset is empty, which means that we have exhausted all the records for our request</li></ol><div>For our request logic, the above conditions *should* not be met for the following reason:</div></div><div><ol style="padding-left: 30px; margin-top: 5px; margin-bottom: 0px;"><li>Our request is fairly simple as we are just retrieving all the taxi trip records within the particular month indicated in our request (WHERE pickup_dtime &gt;= month_start AND pickup_dtime &lt; next_month_start)</li><li>We are guaranteed to have at least one (1) record for our request</li><li>Every request in the request loop is guaranteed to return a record since we will not send a request to the server with an offset that exceeds the total record. This is further discussed in #6</li></ol></div><div><br /></div></div></div></div></foreignObject><text x="66" y="373" fill="#333333" font-family="IBM Plex Sans" font-size="11px">When the response received is an empty JSON, in general, this could mean a couple of things:...</text></switch></g></g><g><rect x="80" y="709.38" width="40.54" height="60" rx="6.08" ry="6.08" fill="#ffff00" stroke="#808080" stroke-width="4" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 18px; height: 1px; padding-top: 370px; margin-left: 41px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">2</div></div></div></foreignObject><text x="50" y="373" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">2</text></switch></g></g><g><rect x="2317" y="1468" width="280" height="136" rx="10" ry="10" fill="#dae8fc" stroke="#556f94" stroke-width="6" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 768px; margin-left: 1160px;"><div data-drawio-colors="color: #394A63; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(57, 74, 99); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">offset += request limit</div></div></div></foreignObject><text x="1229" y="772" fill="#394A63" font-family="IBM Plex Sans" font-size="12px" text-anchor="middle">offset += request limit</text></switch></g></g><g/><g><rect x="92.22" y="940" width="1175.78" height="280" rx="25.2" ry="25.2" fill="#f5f5f5" stroke="#666666" stroke-width="2" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 562px; height: 1px; padding-top: 540px; margin-left: 64px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: &quot;IBM Plex Sans&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>To process the non-empty JSON response, we initialize a <b>line accumulator</b> and a <b>line limit.</b> The line accumulator is simply a list that collects the cleaned JSON lines we receive from the stream, while the line limit is the max number of JSON lines we will store in the line accumulator. <span style="background-color: initial;">When the line limit is reached, we save the accumulated lines as CSV. In the next set of requests, we use the offset variable as a flag to indicate that we will append to the end of the CSV file without the header</span></div><div><span style="background-color: initial;"><br /></span></div><div><span style="background-color: initial;">The reason why we further </span></div></div></div></div></foreignObject><text x="64" y="543" fill="#333333" font-family="IBM Plex Sans" font-size="11px">To process the non-empty JSON response, we initialize a line accumulator and a line limit. The line ac...</text></switch></g></g><g><rect x="76" y="973.63" width="40.54" height="60.75" rx="6.08" ry="6.08" fill="#ffff00" stroke="#808080" stroke-width="4" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 18px; height: 1px; padding-top: 502px; margin-left: 39px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; overflow-wrap: normal;">3</div></div></div></foreignObject><text x="48" y="506" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">3</text></switch></g></g></g></svg>